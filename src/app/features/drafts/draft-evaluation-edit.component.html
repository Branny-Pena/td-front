<app-wizard-layout
  [currentStep]="4"
  [totalSteps]="6"
  [backLabel]="'Atrás'"
  [nextLabel]="'Siguiente'"
  [showBack]="true"
  [showNext]="true"
  [nextDisabled]="form.invalid || isLoading() || isPageLoading()"
  [isLoading]="isLoading()"
  (backClick)="onBack()"
  (nextClick)="onNext()">
  <div class="max-w-3xl mx-auto">
    <app-content-card title="Evaluación">
      @if (isPageLoading()) {
        <div class="h-32 rounded-lg border border-gray-200 bg-gray-50 animate-pulse"></div>
      } @else {
        <form [formGroup]="form" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Probabilidad de compra (%)
            </label>
            <input
              type="number"
              min="0"
              max="100"
              formControlName="purchaseProbability"
              class="w-full rounded-[10px] border border-gray-300 bg-white px-3 py-2 focus:outline-none focus-visible:td-ring-primary" />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Tiempo estimado de compra
            </label>
            <app-combo-box
              formControlName="estimatedPurchaseDate"
              [options]="estimatedPurchaseOptions"
              placeholder="Escribe o selecciona"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Observaciones (opcional)
            </label>
            <textarea
              rows="4"
              formControlName="observations"
              maxlength="255"
              class="w-full rounded-[10px] border border-gray-300 bg-white px-3 py-2 focus:outline-none focus-visible:td-ring-primary"></textarea>
            <div class="mt-1 text-xs text-gray-500">Máximo 255 caracteres.</div>
          </div>
        </form>
      }
    </app-content-card>
  </div>
</app-wizard-layout>

