<app-modal-dialog
  [isOpen]="isOpen()"
  [title]="title()"
  acceptText="Cerrar"
  rejectText="Cancelar"
  (accept)="onClose()"
  (reject)="onClose()"
  (closed)="onClose()">
  <div class="space-y-3">
    <div class="text-sm text-gray-700">
      Apunta la cámara al código para escanear.
    </div>

    @if (errorText()) {
      <div class="text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
        {{ errorText() }}
      </div>
    }

    <div class="rounded-xl overflow-hidden border border-gray-200 bg-black/5">
      <zxing-scanner
        class="block w-full h-72"
        [enable]="isEnabled()"
        [formats]="formats()"
        [tryHarder]="true"
        [torch]="false"
        (permissionResponse)="onPermissionResponse($event)"
        (camerasFound)="onCamerasFound($event)"
        (scanError)="onScanError()"
        (scanSuccess)="onScanSuccess($event)">
      </zxing-scanner>
    </div>

    @if (hasPermission() === false) {
      <div class="text-xs text-gray-600">
        Habilita la cámara en tu navegador para usar el escáner.
      </div>
    } @else if (camerasFound() === false) {
      <div class="text-xs text-gray-600">
        Verifica que el dispositivo tenga cámara disponible.
      </div>
    }
  </div>
</app-modal-dialog>

